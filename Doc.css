/* 
import { AgGridReact } from "ag-grid-react";
import { useEffect, useState, useMemo, useRef } from "react";
import { loadGrid } from "../../Service/Api";
import { myTheme } from "../../Styles/them";

export default function DynamicGrid() {
  const [columnDefs, setColumnDefs] = useState([]);
  const [rowData, setRowData] = useState([]);
  const [editable, setEditable] = useState(false);
  const [theme, setTheme] = useState(false);
  const [grouped, setGrouped] = useState(false);

  const gridRef = useRef(); // Ref to AG Grid instance

  // Default column definition
  const defaultColDef = useMemo(
    () => ({
      filter: true,
      sortable: true,
      editable: (params) => editable && params.colDef.field !== "id",
      resizable: true,
    }),
    [editable]
  );

  // Load columns and data from API
  useEffect(() => {
    async function fetchData() {
      const { dynamicColumns, data } = await loadGrid();
      setColumnDefs([...dynamicColumns]);
      setRowData([...data]);
    }
    fetchData();
  }, []);

  // Toggle theme
  const handleThemeChange = () => {
    setTheme((prev) => {
      const newTheme = !prev;
      document.body.dataset.agThemeMode = newTheme ? "dark" : "light";
      return newTheme;
    });
  };

  // Toggle editable mode
  const toggleEditable = () => {
    setEditable((prev) => !prev);
    setColumnDefs((prev) => [...prev]); // Force AG Grid to refresh defaultColDef
  };

  // Add a new row
  const addRow = () => {
    const newRow = {
      id: rowData.length + 1,
      name: "New Student",
      username: "newuser",
      email: "new@gmail.com",
      phone: "9999999999",
      address_city: "Chennai",
    };
    setRowData((prev) => [...prev, newRow]);

    // Start editing the new row
    setTimeout(() => {
      gridRef.current.api.startEditingCell({
        rowIndex: rowData.length,
        colKey: "name",
      });
    }, 0);
  };

  // Delete selected rows
  const deleteSelected = () => {
    const selectedNodes = gridRef.current.api.getSelectedNodes();
    if (!selectedNodes.length) {
      alert("Please select at least one row to delete.");
      return;
    }
    const selectedIds = selectedNodes.map((node) => node.data.id);
    setRowData((prev) => prev.filter((row) => !selectedIds.includes(row.id)));
  };

  // Toggle row grouping by 'company'
  const toggleRowGroup = () => {
    const api = gridRef.current.api;
    const columnApi = gridRef.current.columnApi;
    if (!grouped) {
      api.setRowGroupColumns(["company"]);
      api.updateGridOptions((op)=>{op.sideBar = 'columns'});
      console.log(api, columnApi);
    } else {
      api.setRowGroupColumns([]);
    }

    setGrouped((prev) => !prev);
  };

  return (
    <div className="gridContainer" style={{ height: 600, width: "100%" }}>
      <div className="toolbar" style={{ marginBottom: 10 }}>
        <button className="btn" onClick={handleThemeChange}>
          {theme ? "Dark" : "Light"}
        </button>
        <button className="btn" onClick={toggleEditable}>
          {editable ? "Disable Editing" : "Enable Editing"}
        </button>
        <button className="btn" onClick={addRow}>
          Add Row
        </button>
        <button className="btn" onClick={deleteSelected}>
          Delete Selected
        </button>
        <button className="btn" onClick={toggleRowGroup}>
          {grouped ? "Ungroup" : "Group Rows"}
        </button>
      </div>

      <div className="ag-theme-alpine" style={{ height: 500, width: "100%" }}>
        <AgGridReact
          ref={gridRef}
          theme={myTheme}
          columnDefs={columnDefs}
          rowData={rowData}
          defaultColDef={defaultColDef}
          rowSelection="multiple"
          animateRows={true}
          pagination={true}
          paginationPageSize={10}
          onCellValueChanged={(params) => {
            console.log("Updated Row:", params.data);
          }}
        />
      </div>
    </div>
  );
} */


